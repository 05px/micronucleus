GAS LISTING /var/folders/nd/dq8cd7_x03d_z3x899kwf__80000gn/T//ccYBGVjm.s 			page 1


   1               		.file	"main.c"
   2               	__SREG__ = 0x3f
   3               	__SP_H__ = 0x3e
   4               	__SP_L__ = 0x3d
   5               	__CCP__ = 0x34
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.text
   9               		.type	writeFlashPage, @function
  10               	writeFlashPage:
  11               	/* prologue: function */
  12               	/* frame size = 0 */
  13               	/* stack size = 0 */
  14               	.L__stack_usage = 0
  15 0000 81E0      		ldi r24,lo8(1)
  16 0002 8093 0000 		sts didWriteSomething,r24
  17               	/* #APP */
  18               	 ;  125 "main.c" 1
  19 0006 F894      		cli
  20               	 ;  0 "" 2
  21               	/* #NOAPP */
  22 0008 E091 0000 		lds r30,currentAddress
  23 000c F091 0000 		lds r31,currentAddress+1
  24 0010 3297      		sbiw r30,2
  25 0012 85E0      		ldi r24,lo8(5)
  26               	/* #APP */
  27               	 ;  126 "main.c" 1
  28 0014 8093 5700 		sts 87, r24
  29 0018 E895      		spm
  30               		
  31               	 ;  0 "" 2
  32               	/* #NOAPP */
  33               	.L2:
  34 001a 07B6      		in __tmp_reg__,87-32
  35 001c 00FC      		sbrc __tmp_reg__,0
  36 001e 00C0      		rjmp .L2
  37               	/* #APP */
  38               	 ;  128 "main.c" 1
  39 0020 7894      		sei
  40               	 ;  0 "" 2
  41               	/* epilogue start */
  42               	/* #NOAPP */
  43 0022 0895      		ret
  44               		.size	writeFlashPage, .-writeFlashPage
  45               		.type	writeWordToPageBuffer, @function
  46               	writeWordToPageBuffer:
  47               	/* prologue: function */
  48               	/* frame size = 0 */
  49               	/* stack size = 0 */
  50               	.L__stack_usage = 0
  51 0024 2091 0000 		lds r18,currentAddress
  52 0028 3091 0000 		lds r19,currentAddress+1
  53 002c 2115      		cp r18,__zero_reg__
  54 002e 3105      		cpc r19,__zero_reg__
  55 0030 01F4      		brne .+2
  56 0032 00C0      		rjmp .L4
  57 0034 2430      		cpi r18,4
GAS LISTING /var/folders/nd/dq8cd7_x03d_z3x899kwf__80000gn/T//ccYBGVjm.s 			page 2


  58 0036 3105      		cpc r19,__zero_reg__
  59 0038 01F0      		breq .L9
  60 003a 44E1      		ldi r20,hi8(5372)
  61 003c 2C3F      		cpi r18,lo8(5372)
  62 003e 3407      		cpc r19,r20
  63 0040 01F4      		brne .L6
  64 0042 8091 0000 		lds r24,vectorTemp
  65 0046 9091 0000 		lds r25,vectorTemp+1
  66 004a 8E57      		subi r24,lo8(-(1410))
  67 004c 9A4F      		sbci r25,hi8(-(1410))
  68 004e 00C0      		rjmp .L7
  69               	.L6:
  70 0050 44E1      		ldi r20,hi8(5374)
  71 0052 2E3F      		cpi r18,lo8(5374)
  72 0054 3407      		cpc r19,r20
  73 0056 01F4      		brne .L7
  74 0058 8091 0000 		lds r24,vectorTemp+2
  75 005c 9091 0000 		lds r25,vectorTemp+2+1
  76 0060 8D57      		subi r24,lo8(-(1411))
  77 0062 9A4F      		sbci r25,hi8(-(1411))
  78 0064 00C0      		rjmp .L7
  79               	.L9:
  80 0066 8FE7      		ldi r24,lo8(-13697)
  81 0068 9AEC      		ldi r25,hi8(-13697)
  82               	.L7:
  83               	/* #APP */
  84               	 ;  162 "main.c" 1
  85 006a F894      		cli
  86               	 ;  0 "" 2
  87               	/* #NOAPP */
  88 006c E091 0000 		lds r30,currentAddress
  89 0070 F091 0000 		lds r31,currentAddress+1
  90 0074 21E0      		ldi r18,lo8(1)
  91               	/* #APP */
  92               	 ;  163 "main.c" 1
  93 0076 0C01      		movw  r0, r24
  94 0078 2093 5700 		sts 87, r18
  95 007c E895      		spm
  96 007e 1124      		clr  r1
  97               		
  98               	 ;  0 "" 2
  99               	 ;  164 "main.c" 1
 100 0080 7894      		sei
 101               	 ;  0 "" 2
 102               	/* #NOAPP */
 103 0082 4091 0000 		lds r20,currentAddress
 104 0086 5091 0000 		lds r21,currentAddress+1
 105 008a FA01      		movw r30,r20
 106               	/* #APP */
 107               	 ;  169 "main.c" 1
 108 008c 2591      		lpm r18, Z+
 109 008e 3491      		lpm r19, Z
 110               		
 111               	 ;  0 "" 2
 112               	/* #NOAPP */
 113 0090 2823      		and r18,r24
 114 0092 3923      		and r19,r25
GAS LISTING /var/folders/nd/dq8cd7_x03d_z3x899kwf__80000gn/T//ccYBGVjm.s 			page 3


 115 0094 2817      		cp r18,r24
 116 0096 3907      		cpc r19,r25
 117 0098 01F0      		breq .L8
 118 009a 8091 0000 		lds r24,events
 119 009e 8160      		ori r24,lo8(1)
 120 00a0 8093 0000 		sts events,r24
 121               	.L8:
 122 00a4 4E5F      		subi r20,lo8(-(2))
 123 00a6 5F4F      		sbci r21,hi8(-(2))
 124 00a8 5093 0000 		sts currentAddress+1,r21
 125 00ac 4093 0000 		sts currentAddress,r20
 126               	/* epilogue start */
 127 00b0 0895      		ret
 128               	.L4:
 129 00b2 81E1      		ldi r24,lo8(17)
 130               	/* #APP */
 131               	 ;  160 "main.c" 1
 132 00b4 8093 5700 		sts 87, r24
 133 00b8 E895      		spm
 134               		
 135               	 ;  0 "" 2
 136               	/* #NOAPP */
 137 00ba 00C0      		rjmp .L9
 138               		.size	writeWordToPageBuffer, .-writeWordToPageBuffer
 139               		.type	fillFlashWithVectors, @function
 140               	fillFlashWithVectors:
 141 00bc CF93      		push r28
 142 00be DF93      		push r29
 143               	/* prologue: function */
 144               	/* frame size = 0 */
 145               	/* stack size = 2 */
 146               	.L__stack_usage = 2
 147 00c0 C091 0000 		lds r28,currentAddress
 148 00c4 D091 0000 		lds r29,currentAddress+1
 149 00c8 CF73      		andi r28,lo8(63)
 150 00ca D070      		andi r29,hi8(63)
 151               	.L11:
 152 00cc 8FEF      		ldi r24,lo8(-1)
 153 00ce 9FEF      		ldi r25,hi8(-1)
 154 00d0 00D0      		rcall writeWordToPageBuffer
 155 00d2 2296      		adiw r28,2
 156 00d4 C034      		cpi r28,64
 157 00d6 D105      		cpc r29,__zero_reg__
 158 00d8 04F0      		brlt .L11
 159 00da 00D0      		rcall writeFlashPage
 160               	/* epilogue start */
 161 00dc DF91      		pop r29
 162 00de CF91      		pop r28
 163 00e0 0895      		ret
 164               		.size	fillFlashWithVectors, .-fillFlashWithVectors
 165               		.section	.init3,"ax",@progbits
 166               	.global	PushMagicWord
 167               		.type	PushMagicWord, @function
 168               	PushMagicWord:
 169               	/* prologue: naked */
 170               	/* frame size = 0 */
 171               	/* stack size = 0 */
GAS LISTING /var/folders/nd/dq8cd7_x03d_z3x899kwf__80000gn/T//ccYBGVjm.s 			page 4


 172               	.L__stack_usage = 0
 173               	/* #APP */
 174               	 ;  258 "main.c" 1
 175 0000 00EB      		ldi r16, 0xB0
 176               	 ;  0 "" 2
 177               	 ;  259 "main.c" 1
 178 0002 0F93      		push r16
 179               	 ;  0 "" 2
 180               	 ;  260 "main.c" 1
 181 0004 07E0      		ldi r16, 0x07
 182               	 ;  0 "" 2
 183               	 ;  261 "main.c" 1
 184 0006 0F93      		push r16
 185               	 ;  0 "" 2
 186               	/* epilogue start */
 187               	/* #NOAPP */
 188               		.size	PushMagicWord, .-PushMagicWord
 189               		.text
 190               	.global	main
 191               		.type	main, @function
 192               	main:
 193 00e2 DF93      		push r29
 194 00e4 CF93      		push r28
 195 00e6 0F92      		push __tmp_reg__
 196 00e8 CDB7      		in r28,__SP_L__
 197 00ea DEB7      		in r29,__SP_H__
 198               	/* prologue: function */
 199               	/* frame size = 1 */
 200               	/* stack size = 3 */
 201               	.L__stack_usage = 3
 202 00ec 88E1      		ldi r24,lo8(24)
 203               	/* #APP */
 204               	 ;  326 "main.c" 1
 205 00ee 0FB6      		in __tmp_reg__, __SREG__
 206 00f0 F894      		cli
 207 00f2 81BD      		out 33, r24
 208 00f4 11BC      		out 33, __zero_reg__
 209 00f6 0FBE      		out __SREG__,__tmp_reg__
 210               		
 211               	 ;  0 "" 2
 212               	/* #NOAPP */
 213 00f8 E0E0      		ldi r30,lo8(0)
 214 00fa F0E0      		ldi r31,hi8(0)
 215               	/* #APP */
 216               	 ;  279 "main.c" 1
 217 00fc 8591      		lpm r24, Z+
 218 00fe 9491      		lpm r25, Z
 219               		
 220               	 ;  0 "" 2
 221               	/* #NOAPP */
 222 0100 2AEC      		ldi r18,hi8(-13697)
 223 0102 8F37      		cpi r24,lo8(-13697)
 224 0104 9207      		cpc r25,r18
 225 0106 01F4      		brne .L14
 226 0108 E4E0      		ldi r30,lo8(4)
 227 010a F0E0      		ldi r31,hi8(4)
 228               	/* #APP */
GAS LISTING /var/folders/nd/dq8cd7_x03d_z3x899kwf__80000gn/T//ccYBGVjm.s 			page 5


 229               	 ;  280 "main.c" 1
 230 010c 8591      		lpm r24, Z+
 231 010e 9491      		lpm r25, Z
 232               		
 233               	 ;  0 "" 2
 234               	/* #NOAPP */
 235 0110 3AEC      		ldi r19,hi8(-13697)
 236 0112 8F37      		cpi r24,lo8(-13697)
 237 0114 9307      		cpc r25,r19
 238 0116 01F0      		breq .L15
 239               	.L14:
 240 0118 00D0      		rcall fillFlashWithVectors
 241               	.L15:
 242 011a 1092 0000 		sts currentAddress+1,__zero_reg__
 243 011e 1092 0000 		sts currentAddress,__zero_reg__
 244 0122 87B3      		in r24,55-32
 245 0124 8360      		ori r24,lo8(3)
 246 0126 87BB      		out 55-32,r24
 247 0128 C09A      		sbi 56-32,0
 248 012a C198      		cbi 56-32,1
 249 012c AC9A      		sbi 53-32,4
 250 012e 8BB7      		in r24,91-32
 251 0130 8062      		ori r24,lo8(32)
 252 0132 8BBF      		out 91-32,r24
 253 0134 BB9A      		sbi 55-32,3
 254 0136 8FE4      		 ldi r24,lo8(1649999)
 255 0138 9DE2      	    ldi r25,hi8(1649999)
 256 013a A9E1      	    ldi r26,hlo8(1649999)
 257 013c 8150      	    1:subi r24,1
 258 013e 9040      	    sbci r25,0
 259 0140 A040      	    sbci r26,0
 260 0142 01F4      	    brne 1b
 261 0144 00C0      		rjmp .
 262 0146 0000      		nop
 263 0148 BB98      		cbi 55-32,3
 264               	/* #APP */
 265               	 ;  272 "main.c" 1
 266 014a 7894      		sei
 267               	 ;  0 "" 2
 268               	/* #NOAPP */
 269 014c EE24      		clr r14
 270 014e FF24      		clr r15
 271               	.L66:
 272 0150 2091 0000 		lds r18,usbRxLen
 273 0154 2350      		subi r18,lo8(-(-3))
 274 0156 27FD      		sbrc r18,7
 275 0158 00C0      		rjmp .L16
 276 015a 8091 0000 		lds r24,usbInputBufOffset
 277 015e ECE0      		ldi r30,lo8(12)
 278 0160 F0E0      		ldi r31,hi8(12)
 279 0162 E81B      		sub r30,r24
 280 0164 F109      		sbc r31,__zero_reg__
 281 0166 E050      		subi r30,lo8(-(usbRxBuf))
 282 0168 F040      		sbci r31,hi8(-(usbRxBuf))
 283 016a 8091 0000 		lds r24,usbRxToken
 284 016e 8D32      		cpi r24,lo8(45)
 285 0170 01F0      		breq .+2
GAS LISTING /var/folders/nd/dq8cd7_x03d_z3x899kwf__80000gn/T//ccYBGVjm.s 			page 6


 286 0172 00C0      		rjmp .L17
 287 0174 2830      		cpi r18,lo8(8)
 288 0176 01F0      		breq .+2
 289 0178 00C0      		rjmp .L18
 290 017a 83EC      		ldi r24,lo8(-61)
 291 017c 8093 0000 		sts usbTxBuf,r24
 292 0180 8AE5      		ldi r24,lo8(90)
 293 0182 8093 0000 		sts usbTxLen,r24
 294 0186 1092 0000 		sts usbMsgFlags,__zero_reg__
 295 018a 9081      		ld r25,Z
 296 018c 9076      		andi r25,lo8(96)
 297 018e 8181      		ldd r24,Z+1
 298 0190 9923      		tst r25
 299 0192 01F0      		breq .L19
 300 0194 8823      		tst r24
 301 0196 01F4      		brne .L20
 302 0198 80E0      		ldi r24,lo8(replyBuffer.1750)
 303 019a 90E0      		ldi r25,hi8(replyBuffer.1750)
 304 019c 9093 0000 		sts usbMsgPtr+1,r25
 305 01a0 8093 0000 		sts usbMsgPtr,r24
 306 01a4 25E0      		ldi r18,lo8(5)
 307 01a6 00C0      		rjmp .L25
 308               	.L20:
 309 01a8 8130      		cpi r24,lo8(1)
 310 01aa 01F4      		brne .L22
 311 01ac C098      		cbi 56-32,0
 312 01ae 8281      		ldd r24,Z+2
 313 01b0 8093 0000 		sts writeLength,r24
 314 01b4 8481      		ldd r24,Z+4
 315 01b6 9581      		ldd r25,Z+5
 316 01b8 9093 0000 		sts currentAddress+1,r25
 317 01bc 8093 0000 		sts currentAddress,r24
 318 01c0 8081      		ld r24,Z
 319 01c2 87FD      		sbrc r24,7
 320 01c4 00C0      		rjmp .L23
 321 01c6 2FEF      		ldi r18,lo8(-1)
 322 01c8 00C0      		rjmp .L24
 323               	.L22:
 324 01ca 8091 0000 		lds r24,events
 325 01ce 8460      		ori r24,lo8(4)
 326 01d0 8093 0000 		sts events,r24
 327 01d4 20E0      		ldi r18,lo8(0)
 328 01d6 00C0      		rjmp .L25
 329               	.L19:
 330 01d8 9281      		ldd r25,Z+2
 331 01da 1092 0000 		sts usbTxBuf+9,__zero_reg__
 332 01de 8823      		tst r24
 333 01e0 01F4      		brne .L26
 334 01e2 1092 0000 		sts usbTxBuf+10,__zero_reg__
 335 01e6 80E0      		ldi r24,lo8(usbTxBuf+9)
 336 01e8 90E0      		ldi r25,hi8(usbTxBuf+9)
 337 01ea 22E0      		ldi r18,lo8(2)
 338 01ec 00C0      		rjmp .L27
 339               	.L26:
 340 01ee 8530      		cpi r24,lo8(5)
 341 01f0 01F4      		brne .L28
 342 01f2 9093 0000 		sts usbNewDeviceAddr,r25
GAS LISTING /var/folders/nd/dq8cd7_x03d_z3x899kwf__80000gn/T//ccYBGVjm.s 			page 7


 343 01f6 00C0      		rjmp .L73
 344               	.L28:
 345 01f8 8630      		cpi r24,lo8(6)
 346 01fa 01F4      		brne .L29
 347 01fc 8381      		ldd r24,Z+3
 348 01fe 8130      		cpi r24,lo8(1)
 349 0200 01F4      		brne .L30
 350 0202 80E0      		ldi r24,lo8(usbDescriptorDevice)
 351 0204 90E0      		ldi r25,hi8(usbDescriptorDevice)
 352 0206 00C0      		rjmp .L72
 353               	.L30:
 354 0208 8230      		cpi r24,lo8(2)
 355 020a 01F4      		brne .L32
 356 020c 80E0      		ldi r24,lo8(usbDescriptorConfiguration)
 357 020e 90E0      		ldi r25,hi8(usbDescriptorConfiguration)
 358               	.L72:
 359 0210 9093 0000 		sts usbMsgPtr+1,r25
 360 0214 8093 0000 		sts usbMsgPtr,r24
 361 0218 22E1      		ldi r18,lo8(18)
 362 021a 00C0      		rjmp .L31
 363               	.L32:
 364 021c 8330      		cpi r24,lo8(3)
 365 021e 01F4      		brne .L68
 366 0220 9923      		tst r25
 367 0222 01F4      		brne .L33
 368 0224 80E0      		ldi r24,lo8(usbDescriptorString0)
 369 0226 90E0      		ldi r25,hi8(usbDescriptorString0)
 370 0228 9093 0000 		sts usbMsgPtr+1,r25
 371 022c 8093 0000 		sts usbMsgPtr,r24
 372 0230 24E0      		ldi r18,lo8(4)
 373 0232 00C0      		rjmp .L31
 374               	.L33:
 375 0234 9130      		cpi r25,lo8(1)
 376 0236 01F4      		brne .L34
 377 0238 80E0      		ldi r24,lo8(usbDescriptorStringVendor)
 378 023a 90E0      		ldi r25,hi8(usbDescriptorStringVendor)
 379 023c 9093 0000 		sts usbMsgPtr+1,r25
 380 0240 8093 0000 		sts usbMsgPtr,r24
 381 0244 22E2      		ldi r18,lo8(34)
 382 0246 00C0      		rjmp .L31
 383               	.L34:
 384 0248 9230      		cpi r25,lo8(2)
 385 024a 01F4      		brne .L68
 386 024c 80E0      		ldi r24,lo8(usbDescriptorStringDevice)
 387 024e 90E0      		ldi r25,hi8(usbDescriptorStringDevice)
 388 0250 9093 0000 		sts usbMsgPtr+1,r25
 389 0254 8093 0000 		sts usbMsgPtr,r24
 390 0258 2CE0      		ldi r18,lo8(12)
 391 025a 00C0      		rjmp .L31
 392               	.L68:
 393 025c 20E0      		ldi r18,lo8(0)
 394               	.L31:
 395 025e 80E4      		ldi r24,lo8(64)
 396 0260 8093 0000 		sts usbMsgFlags,r24
 397 0264 00C0      		rjmp .L25
 398               	.L29:
 399 0266 8830      		cpi r24,lo8(8)
GAS LISTING /var/folders/nd/dq8cd7_x03d_z3x899kwf__80000gn/T//ccYBGVjm.s 			page 8


 400 0268 01F0      		breq .L69
 401 026a 8930      		cpi r24,lo8(9)
 402 026c 01F4      		brne .L36
 403 026e 9093 0000 		sts usbConfiguration,r25
 404 0272 00C0      		rjmp .L73
 405               	.L36:
 406 0274 8A30      		cpi r24,lo8(10)
 407 0276 01F0      		breq .L70
 408               	.L73:
 409 0278 80E0      		ldi r24,lo8(usbTxBuf+9)
 410 027a 90E0      		ldi r25,hi8(usbTxBuf+9)
 411 027c 20E0      		ldi r18,lo8(0)
 412 027e 00C0      		rjmp .L27
 413               	.L69:
 414 0280 80E0      		ldi r24,lo8(usbConfiguration)
 415 0282 90E0      		ldi r25,hi8(usbConfiguration)
 416 0284 00C0      		rjmp .L74
 417               	.L70:
 418 0286 80E0      		ldi r24,lo8(usbTxBuf+9)
 419 0288 90E0      		ldi r25,hi8(usbTxBuf+9)
 420               	.L74:
 421 028a 21E0      		ldi r18,lo8(1)
 422               	.L27:
 423 028c 9093 0000 		sts usbMsgPtr+1,r25
 424 0290 8093 0000 		sts usbMsgPtr,r24
 425 0294 00C0      		rjmp .L25
 426               	.L23:
 427 0296 2681      		ldd r18,Z+6
 428               	.L24:
 429 0298 80E8      		ldi r24,lo8(-128)
 430 029a 8093 0000 		sts usbMsgFlags,r24
 431 029e 00C0      		rjmp .L37
 432               	.L25:
 433 02a0 8781      		ldd r24,Z+7
 434 02a2 8823      		tst r24
 435 02a4 01F4      		brne .L37
 436 02a6 8681      		ldd r24,Z+6
 437 02a8 8217      		cp r24,r18
 438 02aa 00F4      		brsh .L37
 439 02ac 282F      		mov r18,r24
 440               	.L37:
 441 02ae 2093 0000 		sts usbMsgLen,r18
 442 02b2 00C0      		rjmp .L18
 443               	.L17:
 444 02b4 8091 0000 		lds r24,usbMsgFlags
 445 02b8 87FF      		sbrs r24,7
 446 02ba 00C0      		rjmp .L18
 447 02bc 8091 0000 		lds r24,writeLength
 448 02c0 821B      		sub r24,r18
 449 02c2 8093 0000 		sts writeLength,r24
 450 02c6 8F01      		movw r16,r30
 451               	.L42:
 452 02c8 8091 0000 		lds r24,currentAddress
 453 02cc 9091 0000 		lds r25,currentAddress+1
 454 02d0 0097      		sbiw r24,0
 455 02d2 01F4      		brne .L38
 456 02d4 D801      		movw r26,r16
GAS LISTING /var/folders/nd/dq8cd7_x03d_z3x899kwf__80000gn/T//ccYBGVjm.s 			page 9


 457 02d6 8D91      		ld r24,X+
 458 02d8 9C91      		ld r25,X
 459 02da 1197      		sbiw r26,1
 460 02dc 9093 0000 		sts vectorTemp+1,r25
 461 02e0 8093 0000 		sts vectorTemp,r24
 462 02e4 00C0      		rjmp .L39
 463               	.L38:
 464 02e6 8430      		cpi r24,4
 465 02e8 9105      		cpc r25,__zero_reg__
 466 02ea 01F4      		brne .L40
 467 02ec F801      		movw r30,r16
 468 02ee 8081      		ld r24,Z
 469 02f0 9181      		ldd r25,Z+1
 470 02f2 9093 0000 		sts vectorTemp+2+1,r25
 471 02f6 8093 0000 		sts vectorTemp+2,r24
 472 02fa 00C0      		rjmp .L39
 473               	.L40:
 474 02fc F4E1      		ldi r31,hi8(5370)
 475 02fe 8A3F      		cpi r24,lo8(5370)
 476 0300 9F07      		cpc r25,r31
 477 0302 00F0      		brlo .L39
 478 0304 81E1      		ldi r24,lo8(17)
 479               	/* #APP */
 480               	 ;  235 "main.c" 1
 481 0306 8093 5700 		sts 87, r24
 482 030a E895      		spm
 483               		
 484               	 ;  0 "" 2
 485               	/* #NOAPP */
 486 030c 00C0      		rjmp .L41
 487               	.L39:
 488 030e D801      		movw r26,r16
 489 0310 8D91      		ld r24,X+
 490 0312 9D91      		ld r25,X+
 491 0314 8D01      		movw r16,r26
 492 0316 2983      		std Y+1,r18
 493 0318 00D0      		rcall writeWordToPageBuffer
 494 031a 2981      		ldd r18,Y+1
 495 031c 2250      		subi r18,lo8(-(-2))
 496 031e 01F4      		brne .L42
 497               	.L41:
 498 0320 8091 0000 		lds r24,writeLength
 499 0324 8823      		tst r24
 500 0326 01F4      		brne .L18
 501 0328 8091 0000 		lds r24,events
 502 032c 8260      		ori r24,lo8(2)
 503 032e 8093 0000 		sts events,r24
 504 0332 1092 0000 		sts usbMsgLen,__zero_reg__
 505               	.L18:
 506 0336 1092 0000 		sts usbRxLen,__zero_reg__
 507               	.L16:
 508 033a 8091 0000 		lds r24,usbTxLen
 509 033e 84FF      		sbrs r24,4
 510 0340 00C0      		rjmp .L43
 511 0342 8091 0000 		lds r24,usbMsgLen
 512 0346 8F3F      		cpi r24,lo8(-1)
 513 0348 01F4      		brne .+2
GAS LISTING /var/folders/nd/dq8cd7_x03d_z3x899kwf__80000gn/T//ccYBGVjm.s 			page 10


 514 034a 00C0      		rjmp .L43
 515 034c 082F      		mov r16,r24
 516 034e 8930      		cpi r24,lo8(9)
 517 0350 00F0      		brlo .L44
 518 0352 08E0      		ldi r16,lo8(8)
 519               	.L44:
 520 0354 801B      		sub r24,r16
 521 0356 8093 0000 		sts usbMsgLen,r24
 522 035a 8091 0000 		lds r24,usbTxBuf
 523 035e 98E8      		ldi r25,lo8(-120)
 524 0360 8927      		eor r24,r25
 525 0362 8093 0000 		sts usbTxBuf,r24
 526 0366 0023      		tst r16
 527 0368 01F0      		breq .L45
 528 036a E091 0000 		lds r30,usbMsgPtr
 529 036e F091 0000 		lds r31,usbMsgPtr+1
 530 0372 9091 0000 		lds r25,usbMsgFlags
 531 0376 802F      		mov r24,r16
 532 0378 8150      		subi r24,lo8(-(-1))
 533 037a 96FF      		sbrs r25,6
 534 037c 00C0      		rjmp .L46
 535 037e 90E0      		ldi r25,lo8(0)
 536 0380 8050      		subi r24,lo8(-(usbTxBuf+2))
 537 0382 9040      		sbci r25,hi8(-(usbTxBuf+2))
 538 0384 A0E0      		ldi r26,lo8(usbTxBuf+1)
 539 0386 B0E0      		ldi r27,hi8(usbTxBuf+1)
 540               	.L47:
 541               	/* #APP */
 542               	 ;  504 "usbdrv/usbdrv.c" 1
 543 0388 2491      		lpm r18, Z
 544               		
 545               	 ;  0 "" 2
 546               	/* #NOAPP */
 547 038a 2D93      		st X+,r18
 548 038c 3196      		adiw r30,1
 549 038e A817      		cp r26,r24
 550 0390 B907      		cpc r27,r25
 551 0392 01F4      		brne .L47
 552 0394 00C0      		rjmp .L48
 553               	.L46:
 554 0396 9F01      		movw r18,r30
 555 0398 90E0      		ldi r25,lo8(0)
 556 039a 8050      		subi r24,lo8(-(usbTxBuf+2))
 557 039c 9040      		sbci r25,hi8(-(usbTxBuf+2))
 558 039e A0E0      		ldi r26,lo8(usbTxBuf+1)
 559 03a0 B0E0      		ldi r27,hi8(usbTxBuf+1)
 560               	.L49:
 561 03a2 F901      		movw r30,r18
 562 03a4 4191      		ld r20,Z+
 563 03a6 9F01      		movw r18,r30
 564 03a8 4D93      		st X+,r20
 565 03aa A817      		cp r26,r24
 566 03ac B907      		cpc r27,r25
 567 03ae 01F4      		brne .L49
 568               	.L48:
 569 03b0 F093 0000 		sts usbMsgPtr+1,r31
 570 03b4 E093 0000 		sts usbMsgPtr,r30
GAS LISTING /var/folders/nd/dq8cd7_x03d_z3x899kwf__80000gn/T//ccYBGVjm.s 			page 11


 571               	.L45:
 572 03b8 80E0      		ldi r24,lo8(usbTxBuf+1)
 573 03ba 90E0      		ldi r25,hi8(usbTxBuf+1)
 574 03bc 602F      		mov r22,r16
 575 03be 00D0      		rcall usbCrc16Append
 576 03c0 0C5F      		subi r16,lo8(-(4))
 577 03c2 0C30      		cpi r16,lo8(12)
 578 03c4 01F0      		breq .L50
 579 03c6 8FEF      		ldi r24,lo8(-1)
 580 03c8 8093 0000 		sts usbMsgLen,r24
 581               	.L50:
 582 03cc 0093 0000 		sts usbTxLen,r16
 583               	.L43:
 584 03d0 84E1      		ldi r24,lo8(20)
 585               	.L52:
 586 03d2 96B3      		in r25,54-32
 587 03d4 9871      		andi r25,lo8(24)
 588 03d6 01F4      		brne .L51
 589 03d8 8150      		subi r24,lo8(-(-1))
 590 03da 01F4      		brne .L52
 591 03dc 1092 0000 		sts usbNewDeviceAddr,__zero_reg__
 592 03e0 1092 0000 		sts usbDeviceAddr,__zero_reg__
 593               	.L51:
 594 03e4 01E0      		ldi r16,lo8(1)
 595 03e6 8111      		cpse r24,__zero_reg__
 596 03e8 00E0      		ldi r16,lo8(0)
 597               	.L53:
 598 03ea 8091 0000 		lds r24,wasReset.1698
 599 03ee 8017      		cp r24,r16
 600 03f0 01F0      		breq .L54
 601 03f2 0023      		tst r16
 602 03f4 01F4      		brne .L55
 603               	/* #APP */
 604               	 ;  557 "usbdrv/usbdrv.c" 1
 605 03f6 F894      		cli
 606               	 ;  0 "" 2
 607               	/* #NOAPP */
 608 03f8 00D0      		rcall calibrateOscillator
 609               	/* #APP */
 610               	 ;  557 "usbdrv/usbdrv.c" 1
 611 03fa 7894      		sei
 612               	 ;  0 "" 2
 613               	/* #NOAPP */
 614               	.L55:
 615 03fc 0093 0000 		sts wasReset.1698,r16
 616               	.L54:
 617 0400 8CE9      		 ldi r24,lo8(412)
 618 0402 91E0      	    ldi r25,hi8(412)
 619 0404 0197      	    1:sbiw r24,1
 620 0406 01F4      	    brne 1b
 621 0408 0000      		nop
 622 040a 8091 0000 		lds r24,events
 623 040e 8823      		tst r24
 624 0410 01F4      		brne .L71
 625 0412 0894      		sec
 626 0414 E11C      		adc r14,__zero_reg__
 627 0416 F11C      		adc r15,__zero_reg__
GAS LISTING /var/folders/nd/dq8cd7_x03d_z3x899kwf__80000gn/T//ccYBGVjm.s 			page 12


 628 0418 00C0      		rjmp .L56
 629               	.L71:
 630 041a EE24      		clr r14
 631 041c FF24      		clr r15
 632               	.L56:
 633 041e 80FF      		sbrs r24,0
 634 0420 00C0      		rjmp .L57
 635               	/* #APP */
 636               	 ;  117 "main.c" 1
 637 0422 F894      		cli
 638               	 ;  0 "" 2
 639               	/* #NOAPP */
 640 0424 E091 0000 		lds r30,currentAddress
 641 0428 F091 0000 		lds r31,currentAddress+1
 642 042c 3297      		sbiw r30,2
 643 042e 83E0      		ldi r24,lo8(3)
 644               	/* #APP */
 645               	 ;  118 "main.c" 1
 646 0430 8093 5700 		sts 87, r24
 647 0434 E895      		spm
 648               		
 649               	 ;  0 "" 2
 650               	/* #NOAPP */
 651               	.L58:
 652 0436 07B6      		in __tmp_reg__,87-32
 653 0438 00FC      		sbrc __tmp_reg__,0
 654 043a 00C0      		rjmp .L58
 655               	/* #APP */
 656               	 ;  120 "main.c" 1
 657 043c 7894      		sei
 658               	 ;  0 "" 2
 659               	/* #NOAPP */
 660               	.L57:
 661 043e 8091 0000 		lds r24,events
 662 0442 81FF      		sbrs r24,1
 663 0444 00C0      		rjmp .L59
 664 0446 A9E3      		 ldi r26,lo8(8249)
 665 0448 B0E2      	    ldi r27,hi8(8249)
 666 044a 1197      	    1:sbiw r26,1
 667 044c 01F4      	    brne 1b
 668 044e 00C0      		rjmp .
 669 0450 0000      		nop
 670 0452 8091 0000 		lds r24,currentAddress
 671 0456 9091 0000 		lds r25,currentAddress+1
 672 045a 8F73      		andi r24,lo8(63)
 673 045c 9070      		andi r25,hi8(63)
 674 045e 0097      		sbiw r24,0
 675 0460 01F0      		breq .L60
 676 0462 00D0      		rcall fillFlashWithVectors
 677 0464 00C0      		rjmp .L59
 678               	.L60:
 679 0466 00D0      		rcall writeFlashPage
 680               	.L59:
 681 0468 8091 0000 		lds r24,events
 682 046c 82FD      		sbrc r24,2
 683 046e 00C0      		rjmp .L61
 684 0470 B1E5      		ldi r27,lo8(-15535)
GAS LISTING /var/folders/nd/dq8cd7_x03d_z3x899kwf__80000gn/T//ccYBGVjm.s 			page 13


 685 0472 EB16      		cp r14,r27
 686 0474 B3EC      		ldi r27,hi8(-15535)
 687 0476 FB06      		cpc r15,r27
 688 0478 00F0      		brlo .L62
 689               	.L61:
 690 047a E1E2      		 ldi r30,lo8(-24287)
 691 047c F1EA      	    ldi r31,hi8(-24287)
 692 047e 3197      	    1:sbiw r30,1
 693 0480 01F4      	    brne 1b
 694 0482 00C0      		rjmp .
 695 0484 0000      		nop
 696               	/* #APP */
 697               	 ;  303 "main.c" 1
 698 0486 F894      		cli
 699               	 ;  0 "" 2
 700               	/* #NOAPP */
 701 0488 1BBE      		out 91-32,__zero_reg__
 702 048a 15BA      		out 53-32,__zero_reg__
 703 048c 8091 0000 		lds r24,didWriteSomething
 704 0490 8823      		tst r24
 705 0492 01F4      		brne .L63
 706 0494 00C0      		rjmp .L64
 707               	.L65:
 708 0496 00D0      		rcall fillFlashWithVectors
 709               	.L63:
 710 0498 8091 0000 		lds r24,currentAddress
 711 049c 9091 0000 		lds r25,currentAddress+1
 712 04a0 F5E1      		ldi r31,hi8(5376)
 713 04a2 8030      		cpi r24,lo8(5376)
 714 04a4 9F07      		cpc r25,r31
 715 04a6 00F0      		brlo .L65
 716               	.L64:
 717 04a8 1092 5F02 		sts 607,__zero_reg__
 718 04ac 1092 5E02 		sts 606,__zero_reg__
 719               	/* #APP */
 720               	 ;  319 "main.c" 1
 721 04b0 00C0      		rjmp __vectors - 4
 722               	 ;  0 "" 2
 723               	/* #NOAPP */
 724               	.L62:
 725 04b2 1092 0000 		sts events,__zero_reg__
 726 04b6 00C0      		rjmp .L66
 727               		.size	main, .-main
 728               	.global	usbTxLen
 729               		.data
 730               		.type	usbTxLen, @object
 731               		.size	usbTxLen, 1
 732               	usbTxLen:
 733 0000 5A        		.byte	90
 734               	.global	usbDescriptorString0
 735               		.section	.progmem.data,"a",@progbits
 736               		.type	usbDescriptorString0, @object
 737               		.size	usbDescriptorString0, 4
 738               	usbDescriptorString0:
 739 0000 04        		.byte	4
 740 0001 03        		.byte	3
 741 0002 09        		.byte	9
GAS LISTING /var/folders/nd/dq8cd7_x03d_z3x899kwf__80000gn/T//ccYBGVjm.s 			page 14


 742 0003 04        		.byte	4
 743               	.global	usbDescriptorStringVendor
 744               		.type	usbDescriptorStringVendor, @object
 745               		.size	usbDescriptorStringVendor, 34
 746               	usbDescriptorStringVendor:
 747 0004 2203      		.word	802
 748 0006 6300      		.word	99
 749 0008 7200      		.word	114
 750 000a 6500      		.word	101
 751 000c 6100      		.word	97
 752 000e 7400      		.word	116
 753 0010 6900      		.word	105
 754 0012 7600      		.word	118
 755 0014 6500      		.word	101
 756 0016 7000      		.word	112
 757 0018 6F00      		.word	111
 758 001a 6E00      		.word	110
 759 001c 7900      		.word	121
 760 001e 2E00      		.word	46
 761 0020 6300      		.word	99
 762 0022 6F00      		.word	111
 763 0024 6D00      		.word	109
 764               	.global	usbDescriptorStringDevice
 765               		.type	usbDescriptorStringDevice, @object
 766               		.size	usbDescriptorStringDevice, 12
 767               	usbDescriptorStringDevice:
 768 0026 0C03      		.word	780
 769 0028 7500      		.word	117
 770 002a 4200      		.word	66
 771 002c 6F00      		.word	111
 772 002e 6F00      		.word	111
 773 0030 7400      		.word	116
 774               	.global	usbDescriptorDevice
 775               		.type	usbDescriptorDevice, @object
 776               		.size	usbDescriptorDevice, 18
 777               	usbDescriptorDevice:
 778 0032 12        		.byte	18
 779 0033 01        		.byte	1
 780 0034 10        		.byte	16
 781 0035 01        		.byte	1
 782 0036 FF        		.byte	-1
 783 0037 00        		.byte	0
 784 0038 00        		.byte	0
 785 0039 08        		.byte	8
 786 003a C0        		.byte	-64
 787 003b 16        		.byte	22
 788 003c DC        		.byte	-36
 789 003d 05        		.byte	5
 790 003e 01        		.byte	1
 791 003f 00        		.byte	0
 792 0040 01        		.byte	1
 793 0041 02        		.byte	2
 794 0042 00        		.byte	0
 795 0043 01        		.byte	1
 796               	.global	usbDescriptorConfiguration
 797               		.type	usbDescriptorConfiguration, @object
 798               		.size	usbDescriptorConfiguration, 18
GAS LISTING /var/folders/nd/dq8cd7_x03d_z3x899kwf__80000gn/T//ccYBGVjm.s 			page 15


 799               	usbDescriptorConfiguration:
 800 0044 09        		.byte	9
 801 0045 02        		.byte	2
 802 0046 12        		.byte	18
 803 0047 00        		.byte	0
 804 0048 01        		.byte	1
 805 0049 01        		.byte	1
 806 004a 00        		.byte	0
 807 004b 80        		.byte	-128
 808 004c 32        		.byte	50
 809 004d 09        		.byte	9
 810 004e 04        		.byte	4
 811 004f 00        		.byte	0
 812 0050 00        		.byte	0
 813 0051 00        		.byte	0
 814 0052 00        		.byte	0
 815 0053 00        		.byte	0
 816 0054 00        		.byte	0
 817 0055 00        		.byte	0
 818               		.comm usbMsgPtr,2,1
 819               		.comm usbRxToken,1,1
 820               		.comm usbConfiguration,1,1
 821               		.comm usbRxBuf,22,1
 822               		.comm usbInputBufOffset,1,1
 823               		.comm usbDeviceAddr,1,1
 824               		.comm usbNewDeviceAddr,1,1
 825               		.comm usbRxLen,1,1
 826               		.comm usbCurrentTok,1,1
 827               		.comm usbTxBuf,11,1
 828               		.lcomm currentAddress,2
 829               		.lcomm events,1
 830               		.lcomm vectorTemp,4
 831               		.lcomm didWriteSomething,1
 832               		.data
 833               		.type	usbMsgLen, @object
 834               		.size	usbMsgLen, 1
 835               	usbMsgLen:
 836 0001 FF        		.byte	-1
 837               		.lcomm usbMsgFlags,1
 838               		.lcomm writeLength,1
 839               		.type	replyBuffer.1750, @object
 840               		.size	replyBuffer.1750, 5
 841               	replyBuffer.1750:
 842 0002 01        		.byte	1
 843 0003 14        		.byte	20
 844 0004 FA        		.byte	-6
 845 0005 40        		.byte	64
 846 0006 14        		.byte	20
 847               		.lcomm wasReset.1698,1
 848               	.global __do_copy_data
 849               	.global __do_clear_bss
GAS LISTING /var/folders/nd/dq8cd7_x03d_z3x899kwf__80000gn/T//ccYBGVjm.s 			page 16


DEFINED SYMBOLS
                            *ABS*:00000000 main.c
/var/folders/nd/dq8cd7_x03d_z3x899kwf__80000gn/T//ccYBGVjm.s:2      *ABS*:0000003f __SREG__
/var/folders/nd/dq8cd7_x03d_z3x899kwf__80000gn/T//ccYBGVjm.s:3      *ABS*:0000003e __SP_H__
/var/folders/nd/dq8cd7_x03d_z3x899kwf__80000gn/T//ccYBGVjm.s:4      *ABS*:0000003d __SP_L__
/var/folders/nd/dq8cd7_x03d_z3x899kwf__80000gn/T//ccYBGVjm.s:5      *ABS*:00000034 __CCP__
/var/folders/nd/dq8cd7_x03d_z3x899kwf__80000gn/T//ccYBGVjm.s:6      *ABS*:00000000 __tmp_reg__
/var/folders/nd/dq8cd7_x03d_z3x899kwf__80000gn/T//ccYBGVjm.s:7      *ABS*:00000001 __zero_reg__
/var/folders/nd/dq8cd7_x03d_z3x899kwf__80000gn/T//ccYBGVjm.s:10     .text:00000000 writeFlashPage
/var/folders/nd/dq8cd7_x03d_z3x899kwf__80000gn/T//ccYBGVjm.s:830    .bss:00000007 didWriteSomething
                             .bss:00000000 currentAddress
/var/folders/nd/dq8cd7_x03d_z3x899kwf__80000gn/T//ccYBGVjm.s:46     .text:00000024 writeWordToPageBuffer
/var/folders/nd/dq8cd7_x03d_z3x899kwf__80000gn/T//ccYBGVjm.s:829    .bss:00000003 vectorTemp
/var/folders/nd/dq8cd7_x03d_z3x899kwf__80000gn/T//ccYBGVjm.s:828    .bss:00000002 events
/var/folders/nd/dq8cd7_x03d_z3x899kwf__80000gn/T//ccYBGVjm.s:140    .text:000000bc fillFlashWithVectors
/var/folders/nd/dq8cd7_x03d_z3x899kwf__80000gn/T//ccYBGVjm.s:168    .init3:00000000 PushMagicWord
/var/folders/nd/dq8cd7_x03d_z3x899kwf__80000gn/T//ccYBGVjm.s:192    .text:000000e2 main
                            *COM*:00000001 usbRxLen
                            *COM*:00000001 usbInputBufOffset
                            *COM*:00000016 usbRxBuf
                            *COM*:00000001 usbRxToken
                            *COM*:0000000b usbTxBuf
/var/folders/nd/dq8cd7_x03d_z3x899kwf__80000gn/T//ccYBGVjm.s:732    .data:00000000 usbTxLen
/var/folders/nd/dq8cd7_x03d_z3x899kwf__80000gn/T//ccYBGVjm.s:831    .bss:00000008 usbMsgFlags
/var/folders/nd/dq8cd7_x03d_z3x899kwf__80000gn/T//ccYBGVjm.s:841    .data:00000002 replyBuffer.1750
                            *COM*:00000002 usbMsgPtr
/var/folders/nd/dq8cd7_x03d_z3x899kwf__80000gn/T//ccYBGVjm.s:837    .bss:00000009 writeLength
                            *COM*:00000001 usbNewDeviceAddr
/var/folders/nd/dq8cd7_x03d_z3x899kwf__80000gn/T//ccYBGVjm.s:777    .progmem.data:00000032 usbDescriptorDevice
/var/folders/nd/dq8cd7_x03d_z3x899kwf__80000gn/T//ccYBGVjm.s:799    .progmem.data:00000044 usbDescriptorConfiguration
/var/folders/nd/dq8cd7_x03d_z3x899kwf__80000gn/T//ccYBGVjm.s:738    .progmem.data:00000000 usbDescriptorString0
/var/folders/nd/dq8cd7_x03d_z3x899kwf__80000gn/T//ccYBGVjm.s:746    .progmem.data:00000004 usbDescriptorStringVendor
/var/folders/nd/dq8cd7_x03d_z3x899kwf__80000gn/T//ccYBGVjm.s:767    .progmem.data:00000026 usbDescriptorStringDevice
                            *COM*:00000001 usbConfiguration
/var/folders/nd/dq8cd7_x03d_z3x899kwf__80000gn/T//ccYBGVjm.s:835    .data:00000001 usbMsgLen
                            *COM*:00000001 usbDeviceAddr
/var/folders/nd/dq8cd7_x03d_z3x899kwf__80000gn/T//ccYBGVjm.s:838    .bss:0000000a wasReset.1698
                            *COM*:00000001 usbCurrentTok

UNDEFINED SYMBOLS
usbCrc16Append
calibrateOscillator
__vectors
__do_copy_data
__do_clear_bss
